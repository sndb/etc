#!/bin/sh
# status bar

vol() {
	# pulsemixer returns two equal values; use the first one
	pair="$(pulsemixer --get-volume)"
	val="${pair% *}"
	mute="$(pulsemixer --get-mute)"
	graph="$(drawr 20 0 150 "$val")"
	if [ "$mute" = 1 ]; then
		echo "-- $graph"
	else
		echo "$val% $graph"
	fi
}

net() {
	rx=$(traffic | cut -d ' ' -f 1)
	tx=$(traffic | cut -d ' ' -f 2)
	echo "↓ $((rx / 1024)) KiB ↑ $((tx / 1024)) KiB"
}

clock() {
	date +"%Y-%m-%d %H:%M"
}

while :; do
	xsetroot -name "Vol: $(vol)"
	sleep 0.2
done
